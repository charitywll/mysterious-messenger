<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
      <title>Unlockable Routes</title>
    
      <link rel="stylesheet" href="_static/pygments.css"/>
      <link rel="stylesheet" href="_static/theme-light.css"/>
      <link rel="stylesheet" media="(prefers-contrast: high)" href="_static/theme-light-hc.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="_static/theme-dark.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark) and (prefers-contrast: high)" href="_static/theme-dark-hc.css"/>
      
        <link rel="stylesheet" media="print" href="_static/theme-print.css"/>
      
      
      
        
        <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        

        <!-- sphinx script_files -->
          <script src="_static/jquery.js"></script>
          <script src="_static/underscore.js"></script>
          <script src="_static/doctools.js"></script>
          <script src="_static/language_data.js"></script>

        <script src="_static/sphinx_nervproject_theme.js" defer></script>
      
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
   
  

  </head>

  <body>
    <div id="app" class="theme-container"><header class="navbar">
    <div id="header-identity" class="print-only">
        <img id="navbar_logo" src="_static/"/>
        <div id="navbar_title">Mysterious Messenger Wiki</div>
    </div>

  
  <button class="sidebar-button">
      <svg id="sidebar-button-svg" role="img" aria-labelledby="sidebar-button_label" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title id="sidebar-button_label">
              Toggle sidebar
          </title>
          <use xlink:href="_static/fa/solid.svg#bars"></use>
      </svg>
  </button>

  <a href="index.html" class="home-link">
      <span class="site-name">Mysterious Messenger Wiki</span>
  </a>

  <div class="links">
    <div class="nav-links can-hide">



    </div>
  </div>
  
</header>

      
      <table role="none" id="main_layout_table">
        <thead>
          <tr><th><div id="layout_header">
          </div></th></tr>
        </thead>
        <tbody><tr><td>
          <div id="appflex">
            
              <div class="sidebar" id="sidebar">
                
                <nav class="nav-links can-hide">
                  



                  
                </nav><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><nav class="sidebar-links">
  
</nav>
              </div>
            

            <div class="page">
                <nav class="body-header">
  
  
  

  <ul class="page-nav no-print">
</ul>
  
</nav>
                <main class="content">
                  
  <div class="section" id="unlockable-routes">
<h1>Unlockable Routes<a class="headerlink" href="#unlockable-routes" title="Permalink to this headline">¶</a></h1>
<p>If you want to keep certain features “locked” until the player has fulfilled a condition of your choosing (e.g. preventing the player from going through Character B’s route until after they have gone through Character A’s route), you need to set up your own persistent variables to keep track of whether the player has fulfilled your desired condition or not. You can define these variables anywhere you like, though <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/variables.rpy">variables.rpy</a> is a good place if you’re unsure.</p>
<p>For this example, the program will check whether or not the player has successfully gotten the Good End in Tutorial day. First, define the variable:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">persistent</span><span class="o">.</span><span class="n">tutorial_good_end_complete</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tutorial_good_end_complete</span></code> is the name of your created field in the <code class="docutils literal notranslate"><span class="pre">persistent</span></code> object; variables preceeded by <code class="docutils literal notranslate"><span class="pre">persistent</span></code> will be saved across playthroughs. The variable is first initialized to <code class="docutils literal notranslate"><span class="pre">False</span></code> and will be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> after the player has successfully gone through the Good End.</p>
<p>A player who has gone through the Tutorial Good End will have finished the party VN called <code class="docutils literal notranslate"><span class="pre">tutorial_good_end_party</span></code> found in <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_8_plot_branches.rpy">tutorial_8_plot_branches.rpy</a>. The last lines of that label are currently as follows:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">ending</span> <span class="o">=</span> <span class="s1">&#39;good&#39;</span>
<span class="k">jump</span> <span class="n">vn_end_route</span>
</pre></div>
</div>
<p>This ends the route and takes the player back to the menu, so just before this you can set your variable to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">persistent</span><span class="o">.</span><span class="n">tutorial_good_end_complete</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">$</span> <span class="n">ending</span> <span class="o">=</span> <span class="s1">&#39;good&#39;</span>
<span class="k">jump</span> <span class="n">vn_end_route</span>
</pre></div>
</div>
<p>Note that you’re not limited to putting your variable check right at the end of a route – you could also put the <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">persistent.your_variable_here</span> <span class="pre">=</span> <span class="pre">True</span></code> check after a menu option, or after a particular phone call, for example.</p>
<p>Note that if you don’t need the program to remember a variable across playthroughs (for example, if you want the program to remember that the player told Bob “I own a cat” so that you can later have him mention the cat when you’re on his route), you <strong>do not</strong> need <code class="docutils literal notranslate"><span class="pre">persistent.</span></code> in front of your variable definition and can simply write <code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">owns_cat</span> <span class="pre">=</span> <span class="pre">False</span></code> and then set <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">owns_cat</span> <span class="pre">=</span> <span class="pre">True</span></code> after the line where the player declares they own a cat. This variable will be reset to its default of <code class="docutils literal notranslate"><span class="pre">False</span></code> whenever the player begins a new game.</p>
<div class="section" id="customizing-a-screen-based-on-variables">
<h2>Customizing a screen based on variables<a class="headerlink" href="#customizing-a-screen-based-on-variables" title="Permalink to this headline">¶</a></h2>
<p>If you only want to allow the player to access a route after a certain condition is fulfilled, you will need to add some extra code to the route select screen in <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/screens_menu.rpy">screens_menu.rpy</a>. This example will assume you’ve defined that screen as seen in <a class="reference internal" href="Customizing-the-Route-Select-Screen.html"><span class="doc">Customizing the Route Select Screen</span></a>.</p>
<p>In this example, Deep Route will be shown as “locked” until after the player has completed the Good End of Tutorial Day. Everything in <code class="docutils literal notranslate"><span class="pre">route_select_screen</span></code> will remain as shown in <a class="reference internal" href="Customizing-the-Route-Select-Screen.html"><span class="doc">Customizing the Route Select Screen</span></a> except for the Deep Route button:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">vbox</span><span class="p">:</span>
    <span class="k">style</span> <span class="s1">&#39;route_select_vbox&#39;</span>
    <span class="k">button</span><span class="p">:</span>
        <span class="k">style</span> <span class="s1">&#39;route_select_button&#39;</span>
        <span class="na">action</span> <span class="n">Start</span><span class="p">(</span><span class="s1">&#39;casual_route_start&#39;</span><span class="p">)</span>
        <span class="k">text</span> <span class="s2">&quot;Casual Route&quot;</span> <span class="k">style</span> <span class="s1">&#39;menu_text_small&#39;</span> <span class="na">align</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="k">button</span><span class="p">:</span>
        <span class="k">style</span> <span class="s1">&#39;route_select_button&#39;</span>
        <span class="k">if</span> <span class="n">persistent</span><span class="o">.</span><span class="n">tutorial_good_end_complete</span><span class="p">:</span>
            <span class="k">add</span> <span class="s1">&#39;plot_lock&#39;</span> <span class="na">align</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="na">action</span> <span class="n">Show</span><span class="p">(</span><span class="s2">&quot;confirm&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;This route is locked until you&#39;ve completed the Tutorial Good End.&quot;</span><span class="p">,</span> <span class="n">yes_action</span><span class="o">=</span><span class="n">Hide</span><span class="p">(</span><span class="s1">&#39;confirm&#39;</span><span class="p">))</span>
            <span class="na">hover_foreground</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="na">action</span> <span class="n">Start</span><span class="p">(</span><span class="s1">&#39;deep_route_start&#39;</span><span class="p">)</span>
        <span class="k">text</span> <span class="s2">&quot;Deep Route&quot;</span> <span class="k">style</span> <span class="s1">&#39;menu_text_small&#39;</span> <span class="na">align</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>This will show a “lock” icon next to the button for Deep Route if <code class="docutils literal notranslate"><span class="pre">persistent.tutorial_good_end_complete</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>. If the player clicks on Deep Route without having seen the Tutorial Good End, they will get a confirmation screen telling them that Deep Route is locked until they have completed the Tutorial Good End.</p>
<p>After the player has completed the Tutorial Good End, the lock symbol will disappear and clicking on Deep Route will take the player to the beginning of that route as usual.</p>
<p>Alternatively you could also put the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">persistent.tutorial_good_end_complete</span></code> before the button for Deep Route, which would cause it to not be shown at all to a player who hasn’t unlocked it yet.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">vbox</span><span class="p">:</span>
    <span class="k">style</span> <span class="s1">&#39;route_select_vbox&#39;</span>
    <span class="k">button</span><span class="p">:</span>
        <span class="k">style</span> <span class="s1">&#39;route_select_button&#39;</span>
        <span class="na">action</span> <span class="n">Start</span><span class="p">(</span><span class="s1">&#39;casual_route_start&#39;</span><span class="p">)</span>
        <span class="k">text</span> <span class="s2">&quot;Casual Route&quot;</span> <span class="k">style</span> <span class="s1">&#39;menu_text_small&#39;</span> <span class="na">align</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">persistent</span><span class="o">.</span><span class="n">tutorial_good_end_complete</span><span class="p">:</span>
        <span class="k">button</span><span class="p">:</span>
            <span class="k">style</span> <span class="s1">&#39;route_select_button&#39;</span>
            <span class="na">action</span> <span class="n">Start</span><span class="p">(</span><span class="s1">&#39;deep_route_start&#39;</span><span class="p">)</span>
            <span class="k">text</span> <span class="s2">&quot;Deep Route&quot;</span> <span class="k">style</span> <span class="s1">&#39;menu_text_small&#39;</span> <span class="na">align</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Keep in mind, however, that it’s usually a better idea to show the player this content exists so they have a reason to come back and play more of the game.</p>
</div>
</div>

  
    <div class="section no-print">
    
      
    
    
    
    </div>
  

                </main><ul class="page-nav no-print">
</ul>
            </div>
          </div>
        </td></tr></tbody>
        <tfoot>
          <tr><th><div id="layout_footer">
          </div></th></tr>
        </tfoot>
      </table><footer class="footer" role="contentinfo">
  
    <p>
    
      &#169; Copyright 2020, Shawna P.
    
    </p>
  
  
    <p>
    
    
      Licensed under .
    
    
    </p>
  
  
    <p>
  
  
  
    Created using <a
        href="http://sphinx-doc.org/">Sphinx</a> 3.2.1 with
    <a href="https://www.nerv-project.eu">Nerv Project theme</a>
    based on <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>
    and <a href="https://ablog.readthedocs.io/">ABlog</a>.</p>
  
  <div class="pagecount"></div>
</footer>
    </div>
    
    
  </body>
</html>