

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Text Messages &mdash; Mysterious Messenger Wiki v2.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Story Mode (VN)" href="story-mode.html" />
    <link rel="prev" title="Phone Calls" href="phone-calls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Mysterious Messenger Wiki
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog.html">Full Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits-and-Acknowledgements.html">Credits and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="Useful-Built-in-Features.html">Useful Built-in Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="Beginners-Guide.html">Beginner’s Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chatrooms.html">Chatrooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="phone-calls.html">Phone Calls</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Text Messages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-compose-text-cds">The compose text CDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#regular-text-messages">Regular Text Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sending-a-text-message">Sending a Text Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replying-to-a-text-message">Replying to a Text Message</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#replying-after-the-first-message">Replying after the first message</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-text-message-delivery-works">How Text Message Delivery Works</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#real-time-text-conversations">Real-Time Text Conversations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-text-conversation">Writing a Text Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continuing-a-text-message-conversation">Continuing a Text Message Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leaving-a-real-time-text-conversation">Leaving a Real-Time Text Conversation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="story-mode.html">Story Mode (VN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="emails.html">Emails</a></li>
<li class="toctree-l1"><a class="reference internal" href="route-setup.html">Setting up a Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-branches.html">Plot Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-characters.html">Creating Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="cg-albums.html">CG Albums</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mysterious Messenger Wiki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Text Messages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/text-messages.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="text-messages">
<h1>Text Messages<a class="headerlink" href="#text-messages" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>There are two kinds of text messaging styles available in this program. The first, referred to as “regular text messages”, delivers text messages in “chunks” which the player can reply to whenever they like. The second style, called “real-time text conversations”, plays out similar to a one-on-one chatroom. The player receives an initial text message, and upon opening the text conversation, cannot leave until the conversation is over or the player chooses to end it themselves.</p>
<div class="section" id="the-compose-text-cds">
<h2>The compose text CDS<a class="headerlink" href="#the-compose-text-cds" title="Permalink to this headline">¶</a></h2>
<p>The main way of writing text messages is with a special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS that looks like the following example:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">r</span> <span class="s2">&quot;Hi, [name].&quot;</span>
    <span class="n">r</span> <span class="s2">&quot;I wanted to show you how text messages work.&quot;</span>
    <span class="n">r</span> <span class="s2">&quot;Send a reply if you got this message okay!&quot;</span>
    <span class="k">label</span> <span class="n">example_reply_1</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS takes several options, which are explained below.</p>
<dl class="simple">
<dt><cite>who</cite></dt><dd><p>Required. “who” should be the ChatCharacter variable of the character who is taking part in the conversation. e.g. <code class="docutils literal notranslate"><span class="pre">s</span></code></p>
</dd>
<dt><cite>real_time</cite></dt><dd><p>Indicates that this text message should play out as a real-time text conversation. If this option is not present, the conversation is treated as a regular text message.</p>
</dd>
<dt><cite>deliver_at</cite></dt><dd><p>Takes one of three arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random</span></code> to have the message delivered at a random time after the associated timeline item has been played but before the next one is made available. This is only applicable if the game is being played in real-time mode; otherwise, the message is simply delivered after the timeline item is played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next_item</span></code> to have the message delivered at a random time between the timeline item after this one and the item following it. e.g. if there are three items at 11:00, 12:00, and 13:00 and this text is in the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label of the 11:00 item, <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> will deliver this message sometime between 12:00 and 13:00, while <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> would deliver the text message sometime between 11:00 and 12:00. This only works when the player is playing in real-time mode; otherwise, the message is simply delivered after its timeline item has been played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is any time formatted in 24-hour format. For example, <code class="docutils literal notranslate"><span class="pre">14:23</span></code> would cause the message to be delivered at <code class="docutils literal notranslate"><span class="pre">14:23</span></code> in real-time. This only works when the player is playing in real-time mode; otherwise, the message is delivered after the associated timeline item is played.</p></li>
</ul>
</dd>
</dl>
<p>The dialogue inside the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> block also takes options besides dialogue:</p>
<dl class="simple">
<dt><cite>pause &lt;#&gt;</cite></dt><dd><p>Indicates that the delivery of the item after the pause should wait the given number of seconds before being delivered. This only occurs when the player is playing on real-time mode. <code class="docutils literal notranslate"><span class="pre">pause</span></code> also takes math expressions for the time e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2*60</span></code> would cause the following message to be delivered two minutes (120 seconds) after the previous message.</p>
</dd>
<dt><cite>label &lt;labelname&gt;</cite></dt><dd><p>Sets the label the program should jump to in order to continue a conversation or allow the player to reply. <code class="docutils literal notranslate"><span class="pre">labelname</span></code> should not be in quotations. Including a label is optional; excluding it will simply not provide the player with the option to answer the text message.</p>
</dd>
</dl>
<p>Text messages can also include conditional statements to vary dialogue based on certain conditions. An example text message with several of these options combined might look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_day_1_4</span><span class="p">:</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">ja</span> <span class="n">real_time</span> <span class="n">deliver_at</span> <span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span>
        <span class="n">ja</span> <span class="s2">&quot;Hello, [name].&quot;</span>
        <span class="k">pause</span> <span class="mi">60</span>
        <span class="n">ja</span> <span class="s2">&quot;I had a moment of time on my break so I thought I would message you.&quot;</span>
        <span class="k">if</span> <span class="n">ja</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I would have liked to call and hear your voice, but time is short.&quot;</span>
        <span class="k">label</span> <span class="n">day_1_4_ja_msg</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">day_1_4_ja_msg</span><span class="p">:</span>
    <span class="n">ja</span> <span class="s2">&quot;What are you doing right now?&quot;</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Not too much. I&#39;m glad you messaged.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I see. I had a question for you, in fact.&quot;</span>
        <span class="s2">&quot;Perhaps you can call me later?&quot;</span> <span class="k">if</span> <span class="n">ja</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I would like that very much ^^&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">ja</span>
            <span class="n">ja</span> <span class="s2">&quot;If you don&#39;t mind, I wanted to ask you:&quot;</span>
        <span class="s2">&quot;I&#39;m actually kind of busy at the moment.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;Oh, I understand.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;I&#39;m sorry to have caught you at a bad time.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;Before you go, however, I was hoping to ask:&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;Do you like coffee?&quot;</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;I love coffee! I drink it every morning.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;You do? I think it can be nice to have a morning routine, certainly.&quot;</span>
        <span class="s2">&quot;Only if I can have it with lots of cream and sugar.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;Ah, that&#39;s understandable.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;Coffee can be rather bitter on its own.&quot;</span>
        <span class="s2">&quot;I drink it straight black.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;That&#39;s very bold of you. Some coffees are rather bitter.&quot;</span>
        <span class="s2">&quot;I don&#39;t really like coffee.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I understand. It&#39;s not always to everyone&#39;s taste.&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;I&#39;m afraid my break is over, but I&#39;m glad I got to talk with you.&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;I hope we can speak again soon.&quot;</span>

    <span class="k">return</span>
</pre></div>
</div>
<p>In this case, the last message of the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> block will be the one delivered at the requested time (10:15), so the first message (Hello, [name]) is delivered around 10:14 and the final message at 10:15. The first message may be delivered slightly earlier depending on whether the player has more than 5 heart points with <code class="docutils literal notranslate"><span class="pre">ja</span></code> or not, as the program also calculates roughly how long it would take to type out each message and staggers delivery time accordingly. <code class="docutils literal notranslate"><span class="pre">pause</span></code> allows you to fine-tune this timing.</p>
</div>
<div class="section" id="regular-text-messages">
<h2>Regular Text Messages<a class="headerlink" href="#regular-text-messages" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Example files to look at:</p>
<ul class="simple">
<li><p>tutorial_3_text_message.rpy</p></li>
<li><p>tutorial_3b_VN.rpy</p></li>
<li><p>tutorial_5_coffee.rpy</p></li>
<li><p>tutorial_11_story_call.rpy</p></li>
</ul>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<ol class="arabic">
<li><p>Create a label using the prefix <code class="docutils literal notranslate"><span class="pre">after_</span></code> + the name of the timeline item you want to send the text messages after e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">after_day_1_4</span></code></p></li>
<li><dl class="simple">
<dt>Write <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span> <span class="pre">z:</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable for the character who is sending the message.</dt><dd><ol class="arabic simple">
<li><p>Optionally, you can also include arguments to tell the program when to deliver the message. Acceptable options are <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is the time to deliver the message at, in 24-hour time; <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> to deliver the message randomly before the next timeline item, or <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> to deliver the message sometime between the next timeline item being available and the one after that.</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Write dialogue for the conversation, indented at least one level to the right underneath the <code class="docutils literal notranslate"><span class="pre">compose_text</span></code> line. You may also include conditionals here.</dt><dd><ol class="arabic simple">
<li><p>You can also include the <code class="docutils literal notranslate"><span class="pre">pause</span></code> statement with a number of seconds to pause for, e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2.0*60</span></code>. The message delivery will be “staggered”, with the message after the pause waiting the given number of seconds before sending.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>(Optional) Include a label at the end which will be jumped to to continue the conversation e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">menu1</span></code></p></li>
<li><p>End the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with a return.</p></li>
<li><p>(Optional) Create the label the player can jump to to continue the conversation.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>(Optional) Allow the player to reply to the text message again by writing <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">s.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character sending the message and <code class="docutils literal notranslate"><span class="pre">&quot;menu2&quot;</span></code> is the name of the label to jump to to continue the conversation.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Finish the reply label with <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
</ol>
</div>
<div class="section" id="sending-a-text-message">
<h3>Sending a Text Message<a class="headerlink" href="#sending-a-text-message" title="Permalink to this headline">¶</a></h3>
<p>To have a character text the player after a chatroom, the program looks for a label with a special naming convention. For example, if your chatroom is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>then you should create a label called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>Next, inside the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label, use the special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character who is sending the message. You can then write dialogue the same way as you would for a chatroom, including adding CGs, emojis, and changing fonts. You can use either the spreadsheet style or the <code class="docutils literal notranslate"><span class="pre">msg</span></code> CDS [[INSERT LINK HERE]].</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Text messages currently do not support special speech bubbles.</p>
</div>
<p>Note that all dialogue for a text message should be indented one level to the right so as to be underneath the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;This is an example text message!&quot;</span> <span class="n">curly</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;You can write lots of dialogue here.&quot;</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;Just make sure it&#39;s indented at the correct level~&quot;</span>
</pre></div>
</div>
<p>Finally, if you would like the player to be able to reply, include the name of a label the program should jump to in order to find that reply:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;This is an example text message!&quot;</span> <span class="n">curly</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;You can write lots of dialogue here.&quot;</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;Just make sure it&#39;s indented at the correct level~&quot;</span>
    <span class="k">label</span> <span class="n">my_reply_1</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">my_reply_1</span></code> is the name of the label the program should jump to in order to continue this conversation when the player opens the message. If you don’t want the player to be able to reply, then you can simply omit this line. They will be able to read the text messages but won’t be able to respond.</p>
<p>Finally, end the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with the line <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>

    <span class="n">compose</span> <span class="k">text</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">z</span> <span class="s2">&quot;Hi [name]!&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Hope your morning has been good so far.&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Did you eat breakfast yet?&quot;</span>
        <span class="k">label</span> <span class="n">my_reply_1</span>

    <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="replying-to-a-text-message">
<h3>Replying to a Text Message<a class="headerlink" href="#replying-to-a-text-message" title="Permalink to this headline">¶</a></h3>
<p>If you gave <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> a label, when the player presses “Answer”, the program will jump to that label to continue the conversation. There are no restrictions on what you can call this label, but it’s recommended you come up with a consistent naming scheme to avoid accidentally creating several labels with the same name (which will cause errors).</p>
<p>Create a new reply for the label from your text message:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_reply_1</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;No, I haven&#39;t eaten yet.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s no good! You should eat something soon.&quot;</span>
        <span class="s2">&quot;Yup! I ate as soon as I woke up.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s good to hear.&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">z</span>
    <span class="n">z</span> <span class="s2">&quot;Eating breakfast in the morning is really important.&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>For regular text messages, the label should immediately begin with a <code class="docutils literal notranslate"><span class="pre">menu:</span></code> so that the player is presented with a choice of answers. You can add as many or as few options as you wish. The dialogue here is written the same way as chatrooms, including awarding heart points. You can only award one heart point per reply. It can be for a character not in the conversation as well. For more information on heart points, see [[INSERT LINK HERE]].</p>
<p>Finally, end the whole label with <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
<div class="section" id="replying-after-the-first-message">
<h4>Replying after the first message<a class="headerlink" href="#replying-after-the-first-message" title="Permalink to this headline">¶</a></h4>
<p>If you want the player to be able to reply again after the first message, you need to tell the program where it can find the label to continue the conversation with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">z.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable of the character who is taking part in the conversation and <code class="docutils literal notranslate"><span class="pre">menu2</span></code> is the name of the label to jump to. A text message chain with two opportunities to reply might look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>

    <span class="n">compose</span> <span class="k">text</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">z</span> <span class="s2">&quot;Hi [name]!&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Hope your morning has been good so far.&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Did you eat breakfast yet?&quot;</span>
        <span class="k">label</span> <span class="n">my_reply_1</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">my_reply_1</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;No, I haven&#39;t eaten yet.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s no good! You should eat something soon.&quot;</span>
        <span class="s2">&quot;Yup! I ate as soon as I woke up.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s good to hear.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;Eating breakfast in the morning is really important.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;Do you have any plans for the day?&quot;</span>
    <span class="k">$</span> <span class="n">z</span><span class="o">.</span><span class="n">text_label</span> <span class="o">=</span> <span class="s2">&quot;my_reply_2&quot;</span>
    <span class="k">return</span>

<span class="k">label</span> <span class="n">my_reply_2</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Maybe you should call me~&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;!!&quot;</span>
            <span class="n">z</span> <span class="s2">&quot;{image=zen_wink}&quot;</span> <span class="p">(</span><span class="n">img</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">z</span> <span class="s2">&quot;Haha, maybe I will~&quot;</span>
        <span class="s2">&quot;Nah, I&#39;m going to be lazy today.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;Sometimes it&#39;s nice to have days like that.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;It was good talking with you!&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-text-message-delivery-works">
<h3>How Text Message Delivery Works<a class="headerlink" href="#how-text-message-delivery-works" title="Permalink to this headline">¶</a></h3>
<p>When you write text messages inside an <code class="docutils literal notranslate"><span class="pre">after_</span></code> label, those messages are added to a “delivery pool” which is delivered to the player in increments after they finish playing the associated timeline item. So, if you composed text messages for characters A, B, and C, the player may receive Character A’s message immediately upon returning to the home screen, and will then receive Character B and C’s messages either by waiting around on the home screen or performing other actions such as replying to other text message or emails.</p>
<p>Similarly, if the player has replied to Character A’s message, Character A’s response gets added to the pool and will eventually be delivered to the player after some time has passed.</p>
<p>All text messages in the delivery pool are immediately delivered as soon as the player clicks to enter the timeline screen.</p>
<p>In this program, there are no time limits on when you can or can’t reply to text messages. However, if a character sends the player a new text message and the player hasn’t replied to the previous conversation, they will no longer be able to continue the older conversation.</p>
</div>
</div>
<div class="section" id="real-time-text-conversations">
<h2>Real-Time Text Conversations<a class="headerlink" href="#real-time-text-conversations" title="Permalink to this headline">¶</a></h2>
<p>Unlike regular text messages, real-time text conversations play out similar to a chatroom with a single character. The player receives a text message, and upon entering the conversation, cannot leave until either the conversation is over or the player exits the conversation manually and the conversation is lost.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Example files to look at:</p>
<ul class="simple">
<li><p>tutorial_3_text_message.rpy</p></li>
<li><p>tutorial_3b_VN.rpy</p></li>
<li><p>tutorial_5_coffee.rpy</p></li>
<li><p>tutorial_11_story_call.rpy</p></li>
</ul>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<ol class="arabic">
<li><p>Create a label using the prefix <code class="docutils literal notranslate"><span class="pre">after_</span></code> + the name of the timeline item you want to send the text messages after e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">after_day_1_4</span></code></p></li>
<li><p>Write <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span> <span class="pre">z</span> <span class="pre">real_time:</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable for the character who is sending the message.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Optionally, you can also include arguments to tell the program when to deliver the message. Acceptable options are <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is the time to deliver the message at, in 24-hour time; <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> to deliver the message randomly before the next timeline item, or <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> to deliver the message sometime between the next timeline item being available and the one after that.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Write dialogue for the conversation, indented at least one level to the right underneath the <code class="docutils literal notranslate"><span class="pre">compose_text</span></code> line. You may also include conditionals here.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>You can also include the <code class="docutils literal notranslate"><span class="pre">pause</span></code> statement with a number of seconds to pause for, e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2.0*60</span></code>. The message delivery will be “staggered”, with the message after the pause waiting the given number of seconds before sending.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>(Optional) Include a label at the end which will be jumped to to continue the conversation e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">menu1</span></code></p></li>
<li><p>End the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with a return.</p></li>
<li><p>(Optional) Create the label the player can jump to to continue the conversation.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>(Optional) Allow the player to reply to the text message again by writing <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">s.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character sending the message and <code class="docutils literal notranslate"><span class="pre">&quot;menu2&quot;</span></code> is the name of the label to jump to to continue the conversation.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Finish the reply label with <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
</ol>
</div>
<div class="section" id="writing-a-text-conversation">
<h3>Writing a Text Conversation<a class="headerlink" href="#writing-a-text-conversation" title="Permalink to this headline">¶</a></h3>
<p>To have a character initiate a text conversation, like with regular text messages, you need to have a label that follows a specific naming convention. For example, if your timeline item is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">casual_route_2_4</span><span class="p">:</span>
</pre></div>
</div>
<p>then you need to create a label called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_casual_route_2_4</span><span class="p">:</span>
</pre></div>
</div>
<p>Then you will compose the text message. This uses a special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
    <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span>
</pre></div>
</div>
<p>The main difference between this and regular text messages is the addition of the <code class="docutils literal notranslate"><span class="pre">real_time</span></code> option. This tells the program that this conversation will play out in real time once the player enters the conversation rather than having all the messages delivered at once.</p>
<p>Dialogue underneath the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement can be written the same way as it is for chatrooms, and allows the use of both the spreadsheet style as well as the <code class="docutils literal notranslate"><span class="pre">msg</span></code> CDS. Text message conversations can also have CGs, emojis, and special fonts.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Text messages currently do not support special speech bubbles.</p>
</div>
<p>Any dialogue written under the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement will show up as “backlog” before the user enters the conversation, so it is usually brief.</p>
<p>You can compose text messages for as many characters as you like, and mix and match regular text messages with real-time text conversations freely. There are also additional options available to you for scheduling when the first text message is delivered. See [[INSERT LINK HERE]] for more.</p>
</div>
<div class="section" id="continuing-a-text-message-conversation">
<h3>Continuing a Text Message Conversation<a class="headerlink" href="#continuing-a-text-message-conversation" title="Permalink to this headline">¶</a></h3>
<p>To allow the player to continue the text message conversation, you must provide a label for the program to jump to when the player opens that text message. This is done with the <code class="docutils literal notranslate"><span class="pre">label</span></code> argument inside the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
    <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span>
    <span class="k">label</span> <span class="n">casual_2_4_ju_reply</span>
</pre></div>
</div>
<p>The program will then jump to the label <code class="docutils literal notranslate"><span class="pre">casual_2_4_ju_reply</span></code> to continue the conversation. You will write dialogue inside the label identically to a chatroom:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_casual_route_2_4</span><span class="p">:</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
        <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
        <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span> <span class="n">ser1</span>
        <span class="k">label</span> <span class="n">casual_2_4_ju_reply</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">casual_2_4_ju_reply</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;I tried to search the Urban Dictionary, but I didn&#39;t understand the results.&quot;</span> <span class="n">ser1</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;You say it when you throw something.&quot;</span><span class="p">:</span>
            <span class="n">ju</span> <span class="s2">&quot;When you throw something?&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;Hmm. I don&#39;t know if I really understand.&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;But thank you for attempting to explain, nevertheless.&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">ju</span>
        <span class="s2">&quot;lololol you&#39;re so funny Jumin.&quot;</span><span class="p">:</span>
            <span class="n">ju</span> <span class="s2">&quot;It was not my intention to be a source of entertainment.&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;But I suppose I am glad if I was able to bring some levity to your day.&quot;</span>
    <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;Perhaps I will ask Assistant Kang for further clarification.&quot;</span> <span class="n">ser1</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>You can add additional dialogue after the reply label, and as many or as few menus (for choices) as you like. Unlike with regular text messages, because the conversation occurs in real time, you may also award or take away heart points as many times as you like during the conversation using <code class="docutils literal notranslate"><span class="pre">award</span> <span class="pre">heart</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span> <span class="pre">heart</span></code>. The whole label should end with <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
</div>
<div class="section" id="leaving-a-real-time-text-conversation">
<h3>Leaving a Real-Time Text Conversation<a class="headerlink" href="#leaving-a-real-time-text-conversation" title="Permalink to this headline">¶</a></h3>
<p>Since real-time text conversations function more closely to chatrooms, if the player clicks the “Back” button during a real-time text conversation, they will be asked if they’d like to end the conversation.</p>
<p><strong>Backing out of a real-time text conversation means that conversation will no longer be available to continue</strong>, though the player will retain any heart points or CGs they unlocked before they exited the conversation. There is no option to “replay” text message conversations, but unlike chatrooms a text message conversation does not expire until another text message overwrites it.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="story-mode.html" class="btn btn-neutral float-right" title="Story Mode (VN)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="phone-calls.html" class="btn btn-neutral float-left" title="Phone Calls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Shawna P

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>