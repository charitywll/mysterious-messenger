<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
      <title>Plot Branches</title>
    
      <link rel="stylesheet" href="_static/pygments.css"/>
      <link rel="stylesheet" href="_static/theme-light.css"/>
      <link rel="stylesheet" media="(prefers-contrast: high)" href="_static/theme-light-hc.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="_static/theme-dark.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark) and (prefers-contrast: high)" href="_static/theme-dark-hc.css"/>
      
        <link rel="stylesheet" media="print" href="_static/theme-print.css"/>
      
      
      
        
        <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        

        <!-- sphinx script_files -->
          <script src="_static/jquery.js"></script>
          <script src="_static/underscore.js"></script>
          <script src="_static/doctools.js"></script>
          <script src="_static/language_data.js"></script>

        <script src="_static/sphinx_nervproject_theme.js" defer></script>
      
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
   
  

  </head>

  <body>
    <div id="app" class="theme-container"><header class="navbar">
    <div id="header-identity" class="print-only">
        <img id="navbar_logo" src="_static/"/>
        <div id="navbar_title">Mysterious Messenger Wiki</div>
    </div>

  
  <button class="sidebar-button">
      <svg id="sidebar-button-svg" role="img" aria-labelledby="sidebar-button_label" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title id="sidebar-button_label">
              Toggle sidebar
          </title>
          <use xlink:href="_static/fa/solid.svg#bars"></use>
      </svg>
  </button>

  <a href="index.html" class="home-link">
      <span class="site-name">Mysterious Messenger Wiki</span>
  </a>

  <div class="links">
    <div class="nav-links can-hide">



    </div>
  </div>
  
</header>

      
      <table role="none" id="main_layout_table">
        <thead>
          <tr><th><div id="layout_header">
          </div></th></tr>
        </thead>
        <tbody><tr><td>
          <div id="appflex">
            
              <div class="sidebar" id="sidebar">
                
                <nav class="nav-links can-hide">
                  



                  
                </nav><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><nav class="sidebar-links">
  
</nav>
              </div>
            

            <div class="page">
                <nav class="body-header">
  
  
  

  <ul class="page-nav no-print">
</ul>
  
</nav>
                <main class="content">
                  
  <div class="section" id="plot-branches">
<h1>Plot Branches<a class="headerlink" href="#plot-branches" title="Permalink to this headline">¶</a></h1>
<p><strong>Example Files to look at: <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_8_plot_branches.rpy">tutorial_8_plot_branches.rpy</a>, <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/route_setup.rpy">route_setup.rpy</a></strong></p>
<p>A brief overview of the steps required (more detail below): |
————————————————————|</p>
<blockquote>
<div><ol class="simple">
<li><p>Use the <strong>List of Chatrooms</strong> tab in <strong>Script Generator.xlsx</strong> or refer to [[Setting up Sequential Chatrooms]] to set up your route. In the <code class="docutils literal notranslate"><span class="pre">ChatHistory</span></code> object that contains the chatroom after which you want the plot to branch, either fill in <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> to the plot branch column in the spreadsheet or ensure you have <code class="docutils literal notranslate"><span class="pre">plot_branch=PlotBranch()</span></code> in your definition.</p></li>
<li><p>Define another list of <code class="docutils literal notranslate"><span class="pre">RouteDay</span></code> objects for the path the player will branch onto.</p></li>
<li><p>After the chatroom with the plot branch, create another label with the chatroom label name + <code class="docutils literal notranslate"><span class="pre">_branch</span></code> e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">my_chatroom_branch</span></code>.</p></li>
<li><p>Put whatever criteria you are testing for in this label. You can then either write <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">continue_route()</span></code> to have the player continue down the main path of the route, or use <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">merge_routes(my_route_bad_end)</span></code> where <code class="docutils literal notranslate"><span class="pre">my_route_bad_end</span></code> is the path you defined in step 2.</p></li>
<li><p>At the end of the label, write <code class="docutils literal notranslate"><span class="pre">jump</span> <span class="pre">plot_branch_end</span></code>.</p></li>
</ol>
</div></blockquote>
<p>To begin, you need to define a list of <code class="docutils literal notranslate"><span class="pre">RouteDay</span></code> objects for every path you want the user to be able to branch onto. For more on defining route branches, see [[Setting up Sequential Chatrooms]]. If you want the branch to have a title, the first item in the list should be a string like “Bob Good Ending”.</p>
<p>To show the plot branch icon in-game, the <code class="docutils literal notranslate"><span class="pre">ChatHistory</span></code> object containing the chatroom before the plot branch must have <code class="docutils literal notranslate"><span class="pre">plot_branch=PlotBranch()</span></code> <strong>or</strong> <code class="docutils literal notranslate"><span class="pre">plot_branch=PlotBranch(True)</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">PlotBranch</span></code> receives <code class="docutils literal notranslate"><span class="pre">True</span></code> as an argument, this indicates that the VN that should occur after the chatroom defined in this <code class="docutils literal notranslate"><span class="pre">ChatHistory</span></code> object should <em>only</em> appear after the player has proceeded through the plot branch. Otherwise, you do not have to include any arguments for the <code class="docutils literal notranslate"><span class="pre">PlotBranch()</span></code> object.</p>
<p>You will include the <code class="docutils literal notranslate"><span class="pre">plot_branch</span></code> argument after every <code class="docutils literal notranslate"><span class="pre">ChatHistory</span></code> object that has a chatroom you would like to branch after.</p>
<div class="section" id="plot-branches-and-visual-novel-sections">
<h2>Plot Branches and Visual Novel Sections<a class="headerlink" href="#plot-branches-and-visual-novel-sections" title="Permalink to this headline">¶</a></h2>
<p>If you only want a plot branch to occur <em>after</em> the player proceeds through the plot branch, one of two things must be done depending on the situation.</p>
<div class="section" id="the-vn-occurs-on-the-main-path">
<h3>The VN occurs on the main path<a class="headerlink" href="#the-vn-occurs-on-the-main-path" title="Permalink to this headline">¶</a></h3>
<p>If the plot branch occurs on the “main path” (aka the longest path in the game; likely the one you told the game to use in [[Creating an Opening Chatroom]]), then you simply need to ensure that the corresponding <code class="docutils literal notranslate"><span class="pre">ChatHistory</span></code> object has the argument <code class="docutils literal notranslate"><span class="pre">plot_branch=PlotBranch(True)</span></code>. This will only unlock its corresponding VN after the player has proceeded through the plot branch.</p>
</div>
<div class="section" id="the-vn-occurs-on-a-branching-path">
<h3>The VN occurs on a branching path<a class="headerlink" href="#the-vn-occurs-on-a-branching-path" title="Permalink to this headline">¶</a></h3>
<p>If the branch you are trying to merge onto the main path has a VN that should appear after the player has proceeded through the plot branch, then the <em>very first</em> <code class="docutils literal notranslate"><span class="pre">RouteDay</span></code> object of that route’s definition must have the argument <code class="docutils literal notranslate"><span class="pre">branch_vn=VNMode('branch_label',</span> <span class="pre">ja)</span></code> where <code class="docutils literal notranslate"><span class="pre">'branch_label'</span></code> is the name of the label for that VN section, and <code class="docutils literal notranslate"><span class="pre">ja</span></code> is an optional argument that tells the program it should use the character <code class="docutils literal notranslate"><span class="pre">ja</span></code>’s image on the VN icon. If not included, the program will simply show a default icon.</p>
<p>In practice, this looks like the following:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">bob_bad_end_1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Bad Story End 1&quot;</span><span class="p">,</span>
    <span class="n">RouteDay</span><span class="p">(</span><span class="s1">&#39;7th&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">ChatHistory</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
                     <span class="n">ChatHistory</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
                     <span class="p">(</span><span class="o">...</span><span class="p">)],</span>
             <span class="n">branch_vn</span><span class="o">=</span><span class="n">VNMode</span><span class="p">(</span><span class="s1">&#39;bob_bad_story_end_1&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">))]</span>
</pre></div>
</div>
<p>In <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/route_setup.rpy">route_setup.rpy</a> you can see an example of this in the definition for <code class="docutils literal notranslate"><span class="pre">tutorial_bre</span></code>.</p>
</div>
</div>
<div class="section" id="determining-which-route-to-branch-to">
<h2>Determining Which Route to Branch To<a class="headerlink" href="#determining-which-route-to-branch-to" title="Permalink to this headline">¶</a></h2>
<p>You need a way of telling the program which branching path to put the player on once they decide to go through the plot branch. You will tell the program what to do in the a label with the suffix <code class="docutils literal notranslate"><span class="pre">'_branch'</span></code>. So, if your chatroom is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>then you will create a branch label</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_chatroom_branch</span><span class="p">:</span>
</pre></div>
</div>
<p>In <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_8_plot_branches.rpy">tutorial_8_plot_branches.rpy</a> there are many examples of functions under the label <code class="docutils literal notranslate"><span class="pre">plot_branch_tutorial_branch</span></code> that you might want to use to determine which route the player branches onto.</p>
<p>To change which route the player is on, you will either use the function call</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">continue_route</span><span class="p">()</span>
</pre></div>
</div>
<p>which simply allows the player to continue along the “main” path, or you will use the function call</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">merge_routes</span><span class="p">(</span><span class="n">bob_route</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">bob_route</span></code> is the name of the variable where you defined the route you want the player to branch onto.</p>
<p>Finally, end the ‘_branch’ label with</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">jump</span> <span class="n">plot_branch_end</span>
</pre></div>
</div>
</div>
</div>

  
    <div class="section no-print">
    
      
    
    
    
    </div>
  

                </main><ul class="page-nav no-print">
</ul>
            </div>
          </div>
        </td></tr></tbody>
        <tfoot>
          <tr><th><div id="layout_footer">
          </div></th></tr>
        </tfoot>
      </table><footer class="footer" role="contentinfo">
  
    <p>
    
      &#169; Copyright 2020, Shawna P.
    
    </p>
  
  
    <p>
    
    
      Licensed under .
    
    
    </p>
  
  
    <p>
  
  
  
    Created using <a
        href="http://sphinx-doc.org/">Sphinx</a> 3.2.1 with
    <a href="https://www.nerv-project.eu">Nerv Project theme</a>
    based on <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>
    and <a href="https://ablog.readthedocs.io/">ABlog</a>.</p>
  
  <div class="pagecount"></div>
</footer>
    </div>
    
    
  </body>
</html>