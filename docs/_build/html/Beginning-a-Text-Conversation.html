<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
      <title>Beginning a Text Conversation</title>
    
      <link rel="stylesheet" href="_static/pygments.css"/>
      <link rel="stylesheet" href="_static/theme-light.css"/>
      <link rel="stylesheet" media="(prefers-contrast: high)" href="_static/theme-light-hc.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="_static/theme-dark.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark) and (prefers-contrast: high)" href="_static/theme-dark-hc.css"/>
      
        <link rel="stylesheet" media="print" href="_static/theme-print.css"/>
      
      
      
        
        <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        

        <!-- sphinx script_files -->
          <script src="_static/jquery.js"></script>
          <script src="_static/underscore.js"></script>
          <script src="_static/doctools.js"></script>
          <script src="_static/language_data.js"></script>

        <script src="_static/sphinx_nervproject_theme.js" defer></script>
      
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
   
  

  </head>

  <body>
    <div id="app" class="theme-container"><header class="navbar">
    <div id="header-identity" class="print-only">
        <img id="navbar_logo" src="_static/"/>
        <div id="navbar_title">Mysterious Messenger Wiki</div>
    </div>

  
  <button class="sidebar-button">
      <svg id="sidebar-button-svg" role="img" aria-labelledby="sidebar-button_label" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title id="sidebar-button_label">
              Toggle sidebar
          </title>
          <use xlink:href="_static/fa/solid.svg#bars"></use>
      </svg>
  </button>

  <a href="index.html" class="home-link">
      <span class="site-name">Mysterious Messenger Wiki</span>
  </a>

  <div class="links">
    <div class="nav-links can-hide">



    </div>
  </div>
  
</header>

      
      <table role="none" id="main_layout_table">
        <thead>
          <tr><th><div id="layout_header">
          </div></th></tr>
        </thead>
        <tbody><tr><td>
          <div id="appflex">
            
              <div class="sidebar" id="sidebar">
                
                <nav class="nav-links can-hide">
                  



                  
                </nav><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><nav class="sidebar-links">
  
</nav>
              </div>
            

            <div class="page">
                <nav class="body-header">
  
  
  

  <ul class="page-nav no-print">
</ul>
  
</nav>
                <main class="content">
                  
  <div class="section" id="beginning-a-text-conversation">
<h1>Beginning a Text Conversation<a class="headerlink" href="#beginning-a-text-conversation" title="Permalink to this headline">¶</a></h1>
<p><strong>Example files to look at: <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_3_text_message.rpy">tutorial_3_text_message.rpy</a></strong></p>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<blockquote>
<div><ol class="simple">
<li><p>Create a label using the prefix <code class="docutils literal notranslate"><span class="pre">after_</span></code> + the name of the chatroom you want to send the text messages after e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">after_my_chatroom</span></code></p></li>
<li><p>Begin the text chain with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">compose_text(s,</span> <span class="pre">real_time=True)</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character who is sending the message</p></li>
<li><p>Write dialogue for the conversation. You may use <code class="docutils literal notranslate"><span class="pre">Script</span> <span class="pre">Generator.xlsx</span></code> to assist with this.</p></li>
<li><p>End the text chain with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">compose_text_end('convo1')</span></code> where <code class="docutils literal notranslate"><span class="pre">'convo1'</span></code> is an optional label to jump to to allow the player to reply to the message</p></li>
<li><p>End the entire <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with the line <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
<li><p>Create a label for the conversation (e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">convo1:</span></code>) and begin with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">text_begin(s)</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character sending the message</p></li>
<li><p>Write the text message dialogue as you would a chatroom, including elements such as <code class="docutils literal notranslate"><span class="pre">(pauseVal=0)</span></code> after the MC’s dialogue.</p></li>
<li><p>Finish the conversation label with <code class="docutils literal notranslate"><span class="pre">jump</span> <span class="pre">text_end</span></code></p></li>
</ol>
</div></blockquote>
<p>To have the characters begin a text conversation with the player after a chatroom, much like regular text messages, you need to have a label that follows a specific naming convention. For example, if your chatroom is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>then you need to create a label called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>Then to begin writing the dialogue that will appear in the popup notifying the player of a new text message, begin with</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="n">compose_text</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">real_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>where r is the variable of the character who will text the player. <code class="docutils literal notranslate"><span class="pre">real_time=True</span></code> indicates to the program that this conversation will take place “in real-time” once the player enters the conversation.</p>
<p>You can then write the character’s dialogue the way you would in a chatroom. These messages will show up as a “backlog” of sorts before the player enters the conversation, so it should be brief.</p>
<p>At the end of the initial messages, write</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="n">compose_text_end</span><span class="p">(</span><span class="s1">&#39;convo1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">'convo1'</span></code> is the name of the label to jump to to continue the text message conversation. This can be named anything, though it’s recommended you come up with a consistent naming scheme so you don’t accidentally have two labels with the same name.</p>
<p>You can repeat this for as many text conversations as you’d like to have, beginning each with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">compose_text(r,</span> <span class="pre">real_time=True)</span></code> and ending with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">compose_text_end('convo1')</span></code>, of course swapping out the character variables and label names for different values.</p>
<p>Next, create a label with the name you passed it in <code class="docutils literal notranslate"><span class="pre">compose_text_end</span></code> and begin it with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">text_begin(r)</span></code> where <code class="docutils literal notranslate"><span class="pre">r</span></code> is the variable of the character who is in the conversation.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">convo1</span><span class="p">:</span>
    <span class="k">call</span> <span class="n">text_begin</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, write out the conversation just like a chatroom, including adding CGs, emojis, and changing fonts. Text messages do not currently support special speech bubbles. You can begin the label with additional dialogue before a menu choice. Like in chatrooms, menu choices should be preceeded with <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">answer</span></code> in order to show the answer button at the bottom of the screen. Unlike regular text messages, you can award the player as many heart points as you would like, as they will be awarded in real-time.</p>
<p>Finally, end the text conversation with</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">jump</span> <span class="n">text_end</span>
</pre></div>
</div>
<p>An example of a label to jump to for a real-time text conversation might look like the following:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">convo1</span><span class="p">:</span>
    <span class="k">call</span> <span class="n">text_begin</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="n">r</span> <span class="s2">&quot;Some sample text.&quot;</span>
    <span class="n">r</span> <span class="s2">&quot;This is continuing the conversation from before.&quot;</span>
    <span class="k">call</span> <span class="n">answer</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Choice 1&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 1&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">r</span> <span class="s2">&quot;Reply to choice 1.&quot;</span>
        <span class="s2">&quot;Choice 2&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 2&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">call</span> <span class="n">heart_icon</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">r</span> <span class="s2">&quot;Reply to choice 2.&quot;</span>
    <span class="n">r</span> <span class="s2">&quot;More dialogue for the conversation.&quot;</span>
    <span class="k">call</span> <span class="n">answer</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Choice 3&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 3&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">r</span> <span class="s2">&quot;Reply to choice 3.&quot;</span>
        <span class="s2">&quot;Choice 4&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 4&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">call</span> <span class="n">heart_icon</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">r</span> <span class="s2">&quot;Reply to choice 4.&quot;</span>
    <span class="n">r</span> <span class="s2">&quot;Final dialogue.&quot;</span>
    <span class="k">jump</span> <span class="n">text_end</span>
</pre></div>
</div>
</div>

  
    <div class="section no-print">
    
      
    
    
    
    </div>
  

                </main><ul class="page-nav no-print">
</ul>
            </div>
          </div>
        </td></tr></tbody>
        <tfoot>
          <tr><th><div id="layout_footer">
          </div></th></tr>
        </tfoot>
      </table><footer class="footer" role="contentinfo">
  
    <p>
    
      &#169; Copyright 2020, Shawna P.
    
    </p>
  
  
    <p>
    
    
      Licensed under .
    
    
    </p>
  
  
    <p>
  
  
  
    Created using <a
        href="http://sphinx-doc.org/">Sphinx</a> 3.2.1 with
    <a href="https://www.nerv-project.eu">Nerv Project theme</a>
    based on <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>
    and <a href="https://ablog.readthedocs.io/">ABlog</a>.</p>
  
  <div class="pagecount"></div>
</footer>
    </div>
    
    
  </body>
</html>