<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
      <title>Timed Menus</title>
    
      <link rel="stylesheet" href="_static/pygments.css"/>
      <link rel="stylesheet" href="_static/theme-light.css"/>
      <link rel="stylesheet" media="(prefers-contrast: high)" href="_static/theme-light-hc.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="_static/theme-dark.css"/>
      <link rel="stylesheet" media="(prefers-color-scheme: dark) and (prefers-contrast: high)" href="_static/theme-dark-hc.css"/>
      
        <link rel="stylesheet" media="print" href="_static/theme-print.css"/>
      
      
          <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
      
        
        <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        

        <!-- sphinx script_files -->
          <script src="_static/jquery.js"></script>
          <script src="_static/underscore.js"></script>
          <script src="_static/doctools.js"></script>
          <script src="_static/language_data.js"></script>

        <script src="_static/sphinx_nervproject_theme.js" defer></script>
      
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
   
  

  </head>

  <body>
    <div id="app" class="theme-container"><header class="navbar">
    <div id="header-identity" class="print-only">
        <img id="navbar_logo" src="_static/"/>
        <div id="navbar_title">Mysterious Messenger Wiki</div>
    </div>

  
  <button class="sidebar-button">
      <svg id="sidebar-button-svg" role="img" aria-labelledby="sidebar-button_label" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title id="sidebar-button_label">
              Toggle sidebar
          </title>
          <use xlink:href="_static/fa/solid.svg#bars"></use>
      </svg>
  </button>

  <a href="index.html" class="home-link">
      <span class="site-name">Mysterious Messenger Wiki</span>
  </a>

  <div class="links">
    <div class="nav-links can-hide">



    </div>
  </div>
  
</header>

      
      <table role="none" id="main_layout_table">
        <thead>
          <tr><th><div id="layout_header">
          </div></th></tr>
        </thead>
        <tbody><tr><td>
          <div id="appflex">
            
              <div class="sidebar" id="sidebar">
                
                <nav class="nav-links can-hide">
                  



                  
                </nav><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><nav class="sidebar-links">
  
</nav>
              </div>
            

            <div class="page">
                <nav class="body-header">
  
  
  

  <ul class="page-nav no-print">
</ul>
  
</nav>
                <main class="content">
                  
  <div class="section" id="timed-menus">
<h1>Timed Menus<a class="headerlink" href="#timed-menus" title="Permalink to this headline">¶</a></h1>
<p><strong>Example files to look at: <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_4_timed_menus.rpy">tutorial_4_timed_menus.rpy</a>, <a class="reference external" href="https://github.com/shawna-p/mysterious-messenger/blob/master/game/tutorial_day_scripts/tutorial_9_storytelling.rpy">tutorial_9_storytelling.rpy</a></strong></p>
<p>If a timed menu is used instead of a regular one, the answer button will appear at the bottom of the screen for a specific period of time before disappearing. The chat will continue on while the answer button is displayed. The time the player has left to answer is shown above the answer bar as a planet moving towards the right side of the screen. When it reaches the right side, the answer button will disappear.</p>
<p>There are a few special things to note about timed answers:</p>
<ul class="simple">
<li><p><strong>The time the player has to press the answer button changes depending on how fast they have the chatroom speed set to</strong>. If, when writing the menu, you give the player 10 seconds to reply, the answer button will stay on screen for 10 seconds when the player has the chatroom speed set to 5, but it will stay on the screen for 5.5 seconds for a player with the chatroom speed at 9 and for 14.5 seconds for a player with chatroom speed set to 1.</p>
<ul>
<li><p>This is so that players who have a slower reading speed will still be able to read the same number of messages as a player with a faster reading speed before the answer button times out</p></li>
</ul>
</li>
<li><p><strong>If a player is on Max Speed, it will skip the timed menu entirely</strong>, with no opportunity for the player to press the answer button</p></li>
<li><p><strong>As soon as the player hits the answer button, the chat will stop until they choose an answer</strong>. For example, if the player has 10 seconds to answer and presses the answer button after 5 seconds, the answer choices that appear will not go away even after the 10 seconds are up</p></li>
<li><p><strong>A player who selects the answer button before the time is up will miss any messages that they might have seen if they waited to press the answer button</strong>. For example, if the timer is 10 seconds long and the player presses the answer button after 5 seconds, they will be unable to see any messages that would have been sent in the next 5 seconds if they had waited</p></li>
<li><p><strong>If the player replays a chatroom with timed menus, the answer button will not appear at all</strong>/all timed answers will “time out”. This is due to possible replay issues in the event that a player has never seen the menu options before.</p></li>
</ul>
<div class="section" id="how-to-write-a-timed-menu">
<h2>How to write a timed menu<a class="headerlink" href="#how-to-write-a-timed-menu" title="Permalink to this headline">¶</a></h2>
<p>Writing timed menus works very similarly to regular menus. Whenever you’d like the answer button to become available, include the line</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="n">continue_answer</span><span class="p">(</span><span class="s2">&quot;menu1&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&quot;menu1&quot;</span></code> is the name of the menu to jump to when the player presses the answer button, and <code class="docutils literal notranslate"><span class="pre">8</span></code> is the number of seconds to show the answer button to a player with chatroom speed set to 5. It may take some trial and error to determine how long you should display the answer button for and how many messages the player might see before answering. If you don’t provide the number of seconds for the answer button to remain on-screen, it will default to 5 seconds.</p>
<p>After calling <code class="docutils literal notranslate"><span class="pre">continue_answer</span></code>, you should write more dialogue that will continue to be sent to the chatroom until the player hits the answer button. In most cases, the time it takes to display this dialogue should be the number of seconds you show the answer button for. If you just want the player to have a limited time to answer before the chat moves on, see <a class="reference external" href="#pausing-for-an-answer">Pausing for an answer</a>.</p>
<p>Next, write the menu. To use timed menus, you need to give each menu a name so the program can jump to it when the player hits the answer button.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">timed_choose</span><span class="p">:</span>
    <span class="k">menu</span> <span class="n">menu1</span><span class="p">:</span>
        <span class="s2">&quot;Choice 1&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 1.&quot;</span>
        <span class="s2">&quot;Choice 2&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Choice 2.&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">s</span> <span class="s2">&quot;Optional dialogue here.&quot;</span>
<span class="n">s</span> <span class="s2">&quot;Regular dialogue resumes here.&quot;</span>
</pre></div>
</div>
<p>The main things to note is that you must write <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">timed_choose:</span></code> before your menu, and you must name the menu what you called it earlier in the <code class="docutils literal notranslate"><span class="pre">continue_answer</span></code> call.</p>
<p>Including <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">timed_choose</span></code> ensures that if the player doesn’t answer before the timer runs out, then they won’t see the menu. Optionally, you can include an <code class="docutils literal notranslate"><span class="pre">else</span></code> statement like you see in the example. Dialogue indented under the <code class="docutils literal notranslate"><span class="pre">else</span></code> statement will only be seen by a player who did not click on the answer button and let the menu time out.</p>
<p>Unlike for regular menus, the dialogue immediately after a choice usually does <strong>not</strong> need the argument <code class="docutils literal notranslate"><span class="pre">(pauseVal=0)</span></code>. For ordinary menus, this reduces the delay between when the player selects a choice and when it displays in chat, but because timed menus allow the player to interrupt the flow of dialogue, it feels more natural for there to be a delay between selecting an answer and having it display in-chat.</p>
<p>Otherwise, timed menus work almost the same as regular menus, and can be nested as well. See <a class="reference external" href="Useful-Chatroom-Functions.html#how-to-let-the-player-make-a-choice">How to let the player make a choice</a> for more information on regular menus.</p>
<div class="section" id="example-chatroom">
<h3>Example chatroom<a class="headerlink" href="#example-chatroom" title="Permalink to this headline">¶</a></h3>
<p>An example of a chatroom with timed menus for interruptions may look as follows:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="n">continue_answer</span><span class="p">(</span><span class="s2">&quot;menu1&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">s</span> <span class="s2">&quot;You only have so long to reply,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;and when the planet at the bottom of the screen reaches the right side,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;BAM!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The opportunity to answer has passed!!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You write these menus a bit differently than regular menus&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You&#39;ll see an example of it in this code.&quot;</span>

<span class="k">if</span> <span class="n">timed_choose</span><span class="p">:</span>
    <span class="k">menu</span> <span class="n">menu1</span><span class="p">:</span>
        <span class="s2">&quot;Slow down! Timed menus??&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Slow down! Timed menus??&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Whoops lolol I got a bit excited&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Yup! Maybe try playing through this chatroom a few times to see what happens?&quot;</span>

        <span class="s2">&quot;So I can choose between listening or interrupting?&quot;</span> <span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;So I can choose between listening or interrupting?&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Yeah! If you just let the chat play out,&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;you&#39;ll see different dialogue than if you&#39;d decided to answer.&quot;</span>

<span class="k">else</span><span class="p">:</span>
    <span class="n">s</span> <span class="s2">&quot;If you don&#39;t reply and just listen,&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;maybe you&#39;ll see some interesting dialogue!&quot;</span>

<span class="n">s</span> <span class="s2">&quot;The timer will be faster or slower depending on what your chatroom speed is&quot;</span>
</pre></div>
</div>
<p>(This code can be seen in-game by playing through the Timed Menus chatroom on Tutorial Day).</p>
<p>In a chatroom using the code above, a player who chooses the option “Slow down! Timed menus??” will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="s2">&quot;You only have so long to reply,&quot;</span>

<span class="c1">## Dialogue that may or may not be seen depending on</span>
<span class="c1">## how fast the player presses the Answer button</span>
<span class="n">s</span> <span class="s2">&quot;and when the planet at the bottom of the screen reaches the right side,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;BAM!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The opportunity to answer has passed!!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You write these menus a bit differently than regular menus&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You&#39;ll see an example of it in this code.&quot;</span>
<span class="c1">## End of optional dialogue</span>

<span class="n">m</span> <span class="s2">&quot;Slow down! Timed menus??&quot;</span>
<span class="n">s</span> <span class="s2">&quot;Whoops lolol I got a bit excited&quot;</span>
<span class="n">s</span> <span class="s2">&quot;Yup! Maybe try playing through this chatroom a few times to see what happens?&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The timer will be faster or slower depending on what your chatroom speed is&quot;</span>
</pre></div>
</div>
<p>A player who chooses the option “So I can choose between listening or interrupting?” will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="s2">&quot;You only have so long to reply,&quot;</span>

<span class="c1">## Dialogue that may or may not be seen depending on</span>
<span class="c1">## how fast the player presses the Answer button</span>
<span class="n">s</span> <span class="s2">&quot;and when the planet at the bottom of the screen reaches the right side,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;BAM!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The opportunity to answer has passed!!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You write these menus a bit differently than regular menus&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You&#39;ll see an example of it in this code.&quot;</span>
<span class="c1">## End of optional dialogue</span>

<span class="n">m</span> <span class="s2">&quot;So I can choose between listening or interrupting?&quot;</span>
<span class="n">s</span> <span class="s2">&quot;Yeah! If you just let the chat play out,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;you&#39;ll see different dialogue than if you&#39;d decided to answer.&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The timer will be faster or slower depending on what your chatroom speed is&quot;</span>
</pre></div>
</div>
<p>Finally, a player who does not press the Answer button and lets the chat play out will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="s2">&quot;You only have so long to reply,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;and when the planet at the bottom of the screen reaches the right side,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;BAM!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The opportunity to answer has passed!!!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You write these menus a bit differently than regular menus&quot;</span>
<span class="n">s</span> <span class="s2">&quot;You&#39;ll see an example of it in this code.&quot;</span>
<span class="n">s</span> <span class="s2">&quot;If you don&#39;t reply and just listen,&quot;</span>
<span class="n">s</span> <span class="s2">&quot;maybe you&#39;ll see some interesting dialogue!&quot;</span>
<span class="n">s</span> <span class="s2">&quot;The timer will be faster or slower depending on what your chatroom speed is&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pausing-for-an-answer">
<h2>Pausing for an answer<a class="headerlink" href="#pausing-for-an-answer" title="Permalink to this headline">¶</a></h2>
<p>If you would like to have the conversation pause for a moment to allow the player to interrupt, but continue on if they say nothing, there is a special function you can use in combination with a <code class="docutils literal notranslate"><span class="pre">timed_pause</span></code> call. For example, a chat like the following:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="s2">&quot;Have you heard of it?&quot;</span>

<span class="k">call</span> <span class="n">continue_answer</span><span class="p">(</span><span class="s2">&quot;other_storytelling_menu1&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">call</span> <span class="n">timed_pause</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="k">if</span> <span class="n">timed_choose</span><span class="p">:</span>
    <span class="k">menu</span> <span class="n">other_storytelling_menu1</span><span class="p">:</span>
        <span class="s2">&quot;Yes.&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;Yes.&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">u</span> <span class="s2">&quot;I thought you would.&quot;</span>
        <span class="s2">&quot;No.&quot;</span><span class="p">:</span>
            <span class="n">m</span> <span class="s2">&quot;No.&quot;</span> <span class="p">(</span><span class="n">pauseVal</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">u</span> <span class="s2">&quot;Oh? I&#39;m surprised.&quot;</span>

<span class="n">u</span> <span class="s2">&quot;Most people are familiar with it already.&quot;</span>
</pre></div>
</div>
<p>After the line “Have you heard of it?”, the chat will pause for 5 seconds (or longer/shorter depending on the player’s chat speed) and the answer button will flash at the bottom of the screen. If, after the five seconds have passed, the player hasn’t answered, the chat will continue on from the line “Most people are familiar with it already.”</p>
<p>If the player chooses to answer, the chat will continue on with their response like a normal menu. The major difference between this method and the previous one is that no new messages will be shown to the player after the answer button becomes available. The first method is better suited for “interruptions”, whereas this method is better suited for direct questions asked of the player. There are many more ways you can combine these methods for interesting storytelling techniques!</p>
<p>In order to wait for a response using a timed menu, you need to use <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">continue_answer(&quot;menu1&quot;,</span> <span class="pre">5)</span></code> where <code class="docutils literal notranslate"><span class="pre">&quot;menu1&quot;</span></code> is the name of the menu to jump to if the player presses the Answer button and <code class="docutils literal notranslate"><span class="pre">5</span></code> is the number of seconds to wait for a response for a player on chatroom speed 5.</p>
<p>Below the call you need to write <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">timed_pause(5)</span></code> where <code class="docutils literal notranslate"><span class="pre">5</span></code> is the  number of seconds to wait for a response. Typically this would be the same as the number in the previous call; however, you can combine this with additional chat messages for a more dynamic experience as well. This label pause for a length of time that takes into account the speed the player has the chatroom set at so players with the chatroom speed set very high or very low will see the same number of messages, and the chat will pause for the same relative time. Otherwise, if you wrote <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">5</span></code>, for example, a player with the chatroom speed set to 9 would see the timed answer timer finish counting down in less than 5 seconds, but the chat won’t move on until the 5 seconds are up.</p>
<p>The line <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">timed_choose:</span></code> is necessary here as well so that players who don’t press the answer option won’t see the menu. Be sure to indent your menu underneath it and give it the same name as you passed to <code class="docutils literal notranslate"><span class="pre">continue_answer</span></code>.</p>
<div class="section" id="example-results">
<h3>Example results<a class="headerlink" href="#example-results" title="Permalink to this headline">¶</a></h3>
<p>In a chatroom using the code above, a player who chooses the option “Yes.” will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="s2">&quot;Have you heard of it?&quot;</span>
<span class="n">m</span> <span class="s2">&quot;Yes.&quot;</span>
<span class="n">u</span> <span class="s2">&quot;I thought you would.&quot;</span>
<span class="n">u</span> <span class="s2">&quot;Most people are familiar with it already.&quot;</span>
</pre></div>
</div>
<p>A player who chooses the option “No.” will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="s2">&quot;Have you heard of it?&quot;</span>
<span class="n">m</span> <span class="s2">&quot;No.&quot;</span>
<span class="n">u</span> <span class="s2">&quot;Oh? I&#39;m surprised.&quot;</span>
<span class="n">u</span> <span class="s2">&quot;Most people are familiar with it already.&quot;</span>
</pre></div>
</div>
<p>And a player who does not press the answer button during the chat will see the following dialogue:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="s2">&quot;Have you heard of it?&quot;</span>
<span class="n">u</span> <span class="s2">&quot;Most people are familiar with it already.&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>

  
    <div class="section no-print">
    
      
    
    
    
    </div>
  

                </main><ul class="page-nav no-print">
</ul>
            </div>
          </div>
        </td></tr></tbody>
        <tfoot>
          <tr><th><div id="layout_footer">
          </div></th></tr>
        </tfoot>
      </table><footer class="footer" role="contentinfo">
  
    <p>
    
      &#169; Copyright 2020, Shawna P.
    
    </p>
  
  
    <p>
    
    
      Licensed under .
    
    
    </p>
  
  
    <p>
  
  
  
    Created using <a
        href="http://sphinx-doc.org/">Sphinx</a> 3.2.1 with
    <a href="https://www.nerv-project.eu">Nerv Project theme</a>
    based on <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>
    and <a href="https://ablog.readthedocs.io/">ABlog</a>.</p>
  
  <div class="pagecount"></div>
</footer>
    </div>
    
    
  </body>
</html>